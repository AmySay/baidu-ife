<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>IFE JavaScript Task 05</title>
</head>
<style>
    .new{
        background: red;
        text-align: center;
        display: inline-block;
    }
</style>
<body>
<input type = "number" class = "input"/>
<button class = "left_in" value = "">左侧进</button>
<button class = "right_in" value = "">右侧进</button>
<button class = "left_out" value = "">左侧出</button>
<button class = "right_out" value = "">右侧出</button>
<div class = "numberArr">

</div>
<div class = "newNumberArr">

</div>
</body>
<script>
    // http://blog.csdn.net/xiangxiangw29/article/details/52460563 append等常用的方法
    window.onload = function () {
        var $ = function(dom){
            return document.querySelectorAll(dom);
        };
        var arr = [];
        function sortNum(arr,flag){
            var minHeight;
            $(".newNumberArr")[0].innerHTML = "";
            for(var i= 0; i<= arr.length;i++){
                for(var j= 0; j<i;j++) {
                    if (arr[i] < arr[j]) {
                        minHeight = arr[j];
                        arr[j] = arr[i];
                        arr[i] = minHeight;
                    }
                }
            }
            if(flag) {
                arr.forEach(function (value,indexe,arr) {
                    var span = document.createElement("span");
                    span.setAttribute("class","new");
                    span.style.height = value+"px";
                    span.innerText = value;
                    $(".newNumberArr")[0].append(span);

                })
            }else{
                arr.reverse().forEach(function (value,indexe,arr) {
                    var span = document.createElement("span");
                    span.setAttribute("class","new");
                    span.style.height = value+"px";
                    span.innerText = value;
                    $(".newNumberArr")[0].append(span);
                })
            }
        };
        for(var i = 0; i< $("button").length;i++){
            $("button")[i].onclick = function () {
                var dom = this.getAttribute("class");
                var direction = dom.split("_")[0];
                var status = dom.split("_")[1];
                var span = document.createElement("span");
                span.setAttribute("class","new");
                if($(".numberArr span").length <= 60){
                    if(Number($("input")[0].value) != ""  && Number($("input")[0].value) >= 10 && Number($("input")[0].value) <= 100){
                    span.innerText = $("input")[0].value;
                    if(direction == "left"){
                        if(status == "in"){
                            $(".numberArr")[0].prepend(span);
                            span.style.height = $("input")[0].value+"px";
                            arr.push($("input")[0].value);
                            sortNum(arr,true);
                        }
                        if(status == "out" && $(".numberArr").children != ""){
                            $(".numberArr")[0].removeChild($(".numberArr")[0].firstElementChild);
                            alert($(".numberArr")[0].firstElementChild.innerText);
                        }
                    }
                    if(direction == "right"){
                        if(status == "in"){
                            $(".numberArr")[0].append(span);
                            span.style.height = $("input")[0].value+"px";
                            arr.push($("input")[0].value);
                            sortNum(arr,false);
                        }
                        if(status == "out" && $(".numberArr").children != ""){
                            $(".numberArr")[0].removeChild($(".numberArr")[0].lastElementChild);
                            alert($(".numberArr")[0].lastElementChild.innerText);
                        }
                    }
                }
                }else{
                    alert("超过60个了");
                }
            }
        }
    }
</script>
</html>